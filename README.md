# DB-exploitation

## MSSQL

1. To get the basic info about ms-sql server like version name etc.

   ```nmap –p 1433 --script ms-sql-info <target>```

2. We have a script in Nmap that will perform abrute-force attempt to find the password

    ```nmap –p 1433 --script ms-sql-brute <target>```

3. One of the things we can do if we do get the credentials of the SA account is that we can attempt to dump the password hashes.

    ```nmap –p 1433 --script ms-sqlempty-password,ms-sql-dump-hashes <target>``` 

For other nmap scripts available, type the following command:

   ```ls /usr/share/nmap/scripts/ | grep ms-sql```

 **Metasploit modules**

Type ```msfconsole``` in your terminal window to open metasploit framework.
Type ```search mssql``` to find all modules available for ms-sql database.

1. To enumerate information about the database server and the version of SQL that is running
    ```use auxiliary/scanner/mssql/mssql_ping```

2. To see what the coniguration on the SQL Server is run
   ```use auxiliary/scanner/mssql/mssql_login```

3. To enumerate information about the database
    ```use auxiliary/admin/mssql/mssql_enum```

4. To execute commands using these stored procedures just as we did with Nmap
    ``` use auxiliary/admin/mssql/mssql_exec```
    
5. This module allows you to perform SQL queries against a database using known-good credentials.
    ```use auxiliary/admin/mssql/mssql_sql```
    
6. This Interesting Data Finder module will connect to a remote MSSQL server using a given set of credentials and search for rows and columns with interesting names.
    ```use auxiliary/admin/mssql/mssql_idf```


## MySQL

***Scanning*** 
  ```nmap -p3306 <target ip>```

1. Sometimes, developer setup databases with default settings and there is no password on the root account.

    ```nmap -p 3306 --script mysql-empty-password,mysql-databases <target>```

2. If there is no password on the root account, we can enumerate users by the following command.

    ```nmap -sV --script mysql-empty-password,mysql-databases,mysql-users <target>```

For other nmap scripts available, type the following command:

   ```ls /usr/share/nmap/scripts/ | grep mysql```

**Metasploit Modules**

Open Metasploit Framework by typing ```msfconsole``` in your terminal window. 
Type ```search mysql``` to find all modules available for mysql database.

1. To crack some valid credentials of the MYSQL.
    ```use auxiliary/scanner/mysql/mysql_login```

2. This scans a host or range of hosts to determine the version of MySQL that is running.
    ```use auxiliary/scanner/mysql/mysql_version```

3. This module automatically enumerates useful information about the database.
    ```use auxiliary/scanner/mysql/sql-enum```
    
4. This module used to dump schema information of the database.
    ```use auxiliary/scanner/mysql/mysql_schemadump```
    
5. This module simply gather password hashes if it finds in a database.
     ```use auxiliary/scanner/mysql/mysql_hashdump```
     
6. This module run SQL queries in the Metasploit framework.
    ```use auxiliary/scanner/mysql/mysql_sqlcan```

## Oracle

**Nmap Scripts** Available for oracle database enumeration

```
oracle-brute.nse
oracle-brute-stealth.nse
oracle-enum-users.nse
oracle-sid-brute.nse
oracle-tns-version.nse
```

**Metasploit Modules**

Type ```msfconsole``` in your terminal window to open metasploit framework.
Type ```search oracle``` to find all modules available for oracle database.

1. This module simply gather password hashes if it finds in a database.
      ```use auxiliary/scanner/oracle/oracle_hashdump```
      
2. This module provides a simple way to scan an Oracle database server for configuration parameters that may be useful during a penetration test. Valid database credentials must be provided for this module to run.
      ```use auxiliary/admin/oracle/oraenum```

3. This module checks if your database is vulnerable to TNS poisoning
      ```use auxiliary/scanner/oracle/tnspoison_checker```

4. This module is used to determine the SID of the Oracle database.
      ```use auxiliary/scanner/oracle/sid_enum```
      
5. This module is used to brute force the SIDs.
      ```use auxiliary/admin/oracle/sid_brute```

6. This module is used to to brute force the passwords for the database accounts.
      ```use auxiliary/scanner/oracle/oracle_login```
